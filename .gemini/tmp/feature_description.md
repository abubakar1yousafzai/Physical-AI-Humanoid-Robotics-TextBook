# Spec-6: ChatBot Features **Feature Branch:** `006-ChatBot-features` **Status:** Draft **Created:** 2025-12-30 **Dependencies:** Spec-4 Complete --- ## Overview Add three enhancements to chat widget: text selection queries, conversation history, and message copying. Remove source citations. --- ## User Stories ### US1: Text Selection â†’ Ask AI (P1) **Given** I am reading the textbook **When** I highlight text (10+ characters) **Then** "âœ¨ Ask AI" button appears above selection **And** clicking it opens chat with context ### US2: Conversation History (P1) **Given** I have past conversations **When** I click history icon (ðŸ•) **Then** history panel shows with conversation list **And** clicking a thread loads that conversation ### US3: New Chat (P2) **Given** I am in a conversation **When** I click "New Chat" button **Then** current chat clears and new thread starts ### US4: Copy Message (P1) **Given** AI has responded **When** I click copy button (ðŸ“‹) on message **Then** text copies to clipboard **And** button shows "âœ“ Copied!" for 2 seconds ### US5: Clean UI (P2) **Given** AI responds with answer **When** message displays **Then** NO sources section shown --- ## Functional Requirements - **FR-001:** Detect text selection >10 characters - **FR-002:** Show "Ask AI" button above selection - **FR-003:** Pre-fill chat input with selected text - **FR-004:** Store conversations in localStorage (limit 50) - **FR-005:** History panel slides from left (300px) - **FR-006:** Copy button copies AI message text - **FR-007:** Remove source citations from UI --- ## Success Criteria - **SC-001:** Text selection triggers button 100% of time - **SC-002:** History shows all past conversations - **SC-003:** Copy works in Chrome, Firefox, Safari - **SC-004:** Sources NOT visible anywhere - **SC-005:** New Chat creates fresh thread